<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Work Hours Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#2563eb',
            secondary: '#1e293b',
          },
        },
      },
    };
  </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex flex-col items-center justify-center transition-colors duration-500">

  <div id="app" class="w-full max-w-md p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-xl transition-all duration-500">
    <div id="login-screen">
      <h1 class="text-2xl font-bold text-center mb-6" id="title">Work Hours Tracker</h1>
      
      <div class="flex justify-center mb-4">
        <select id="language" class="p-2 rounded border dark:bg-gray-700 dark:border-gray-600">
          <option value="en">English</option>
          <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          <option value="de">Deutsch</option>
        </select>
      </div>

      <div class="flex flex-col gap-3">
        <button id="google-login" class="w-full py-3 bg-primary text-white rounded-lg hover:bg-blue-700 font-semibold">
          üîê Sign in with Google
        </button>
        <button id="guest-login" class="w-full py-3 bg-gray-300 dark:bg-gray-700 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-600 font-semibold">
          üë§ Continue as Guest
        </button>
      </div>

      <div class="mt-6 text-center">
        <button id="toggle-theme" class="text-sm underline hover:text-primary">Toggle Theme</button>
      </div>
    </div>

    <div id="dashboard" class="hidden">
      <div class="text-center mb-6">
        <h2 class="text-xl font-bold" id="welcome-text">Welcome!</h2>
        <p id="date" class="text-gray-500 dark:text-gray-300"></p>
      </div>

      <div class="flex flex-col items-center gap-4">
        <div id="clock" class="text-4xl font-mono font-semibold"></div>
        <button id="clock-btn" class="py-3 px-6 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">Clock In</button>
      </div>

      <div class="mt-6 text-center">
        <button id="logout" class="text-sm underline text-red-500 hover:text-red-600">Logout</button>
      </div>
    </div>
  </div>

  <script>
    const app = document.getElementById("app");
    const loginScreen = document.getElementById("login-screen");
    const dashboard = document.getElementById("dashboard");
    const clock = document.getElementById("clock");
    const dateEl = document.getElementById("date");
    const clockBtn = document.getElementById("clock-btn");
    const logoutBtn = document.getElementById("logout");
    const langSelect = document.getElementById("language");
    const title = document.getElementById("title");
    const welcomeText = document.getElementById("welcome-text");
    const toggleTheme = document.getElementById("toggle-theme");

    let user = JSON.parse(localStorage.getItem("user")) || null;
    let isDark = localStorage.getItem("theme") === "dark";

    if (isDark) document.documentElement.classList.add("dark");

    function updateClock() {
      const now = new Date();
      clock.textContent = now.toLocaleTimeString();
      dateEl.textContent = now.toLocaleDateString();
    }
    setInterval(updateClock, 1000);
    updateClock();

    const translations = {
      en: {
        title: "Work Hours Tracker",
        signin_google: "üîê Sign in with Google",
        guest: "üë§ Continue as Guest",
        toggle: "Toggle Theme",
        welcome: "Welcome!",
        logout: "Logout",
        clockin: "Clock In",
        clockout: "Clock Out"
      },
      ar: {
        title: "ŸÖÿ™ÿ™ÿ®ÿπ ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿπŸÖŸÑ",
        signin_google: "üîê ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿπÿ®ÿ± Google",
        guest: "üë§ ŸÖÿ™ÿßÿ®ÿπÿ© ŸÉÿ∂ŸäŸÅ",
        toggle: "ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÖÿ∏Ÿáÿ±",
        welcome: "ŸÖÿ±ÿ≠ÿ®Ÿãÿß!",
        logout: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨",
        clockin: "ÿ®ÿØÿ° ÿßŸÑÿØŸàÿßŸÖ",
        clockout: "ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿØŸàÿßŸÖ"
      },
      de: {
        title: "Arbeitszeit-Tracker",
        signin_google: "üîê Mit Google anmelden",
        guest: "üë§ Als Gast fortfahren",
        toggle: "Thema wechseln",
        welcome: "Willkommen!",
        logout: "Abmelden",
        clockin: "Arbeitsbeginn",
        clockout: "Arbeitsende"
      }
    };

    function setLanguage(lang) {
      localStorage.setItem("lang", lang);
      const t = translations[lang];
      title.textContent = t.title;
      document.getElementById("google-login").textContent = t.signin_google;
      document.getElementById("guest-login").textContent = t.guest;
      toggleTheme.textContent = t.toggle;
      welcomeText.textContent = t.welcome;
      logoutBtn.textContent = t.logout;
      clockBtn.textContent = t.clockin;
      document.body.dir = lang === "ar" ? "rtl" : "ltr";
    }

    const savedLang = localStorage.getItem("lang") || "en";
    langSelect.value = savedLang;
    setLanguage(savedLang);
    langSelect.addEventListener("change", e => setLanguage(e.target.value));

    toggleTheme.addEventListener("click", () => {
      document.documentElement.classList.toggle("dark");
      localStorage.setItem("theme", document.documentElement.classList.contains("dark") ? "dark" : "light");
    });

    document.getElementById("google-login").addEventListener("click", () => {
      user = { name: "Google User" };
      localStorage.setItem("user", JSON.stringify(user));
      showDashboard();
    });

    document.getElementById("guest-login").addEventListener("click", () => {
      user = { name: "Guest" };
      localStorage.setItem("user", JSON.stringify(user));
      showDashboard();
    });

    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("user");
      location.reload();
    });

    let isWorking = false;
    let startTime = null;

    clockBtn.addEventListener("click", () => {
      isWorking = !isWorking;
      const lang = localStorage.getItem("lang") || "en";
      const t = translations[lang];
      if (isWorking) {
        startTime = new Date();
        clockBtn.textContent = t.clockout;
        clockBtn.classList.replace("bg-green-500", "bg-red-500");
      } else {
        const end = new Date();
        const diff = ((end - startTime) / 1000 / 60).toFixed(1);
        alert(`Worked ${diff} minutes`);
        clockBtn.textContent = t.clockin;
        clockBtn.classList.replace("bg-red-500", "bg-green-500");
      }
    });

    function showDashboard() {
      loginScreen.classList.add("hidden");
      dashboard.classList.remove("hidden");
      welcomeText.textContent = `${translations[localStorage.getItem("lang") || "en"].welcome} ${user.name}`;
    }

    if (user) showDashboard();
  </script>
</body>
</html>
